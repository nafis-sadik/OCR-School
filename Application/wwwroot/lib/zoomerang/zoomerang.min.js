!function(){var t,n,i,e,o,r,a="WebkitAppearance"in document.documentElement.style?"-webkit-":"",s=/^([\d\.]+)%$/,l=document.createElement("div"),d=document.createElement("div"),f=!1,c=!1,p={transitionDuration:".4s",transitionTimingFunction:"cubic-bezier(.4,0,0,1)",bgColor:"#fff",bgOpacity:1,maxWidth:300,maxHeight:300,onOpen:null,onClose:null,onBeforeClose:null,onBeforeOpen:null},h=(o={},r={transition:"transitionend",mozTransition:"transitionend",webkitTransition:"webkitTransitionEnd"},["webkitTransition","transition","mozTransition"].some(function(t){if(void 0!==l.style[t])return o.transition=t,o.transEnd=r[t],!0}),["webkitTransform","transform","mozTransform"].some(function(t){if(void 0!==l.style[t])return o.transform=t,!0}),o),m=h.transition,u=h.transform,g=u.replace(/(.*)Transform/,"-$1-transform"),y=h.transEnd;function v(t,n,i){!function(t){var n;t.transition&&(n=t.transition,delete t.transition,t[m]=n);t.transform&&(n=t.transform,delete t.transform,t[u]=n)}(n);var e=t.style,o={};for(var r in n)i&&(o[r]=e[r]||""),e[r]=n[r];return o}v(l,{position:"fixed",display:"none",zIndex:99998,top:0,left:0,right:0,bottom:0,opacity:0,backgroundColor:p.bgColor,cursor:a+"zoom-out",transition:"opacity "+p.transitionDuration+" "+p.transitionTimingFunction}),v(d,{position:"fixed",zIndex:99999,top:"50%",left:"50%",width:0,height:0});var w=["position","display","float","top","left","right","bottom","marginBottom","marginLeft","marginRight","marginTop","font","lineHeight","verticalAlign"];var b={config:function(t){if(!t)return p;for(var n in t)p[n]=t[n];return v(l,{backgroundColor:p.bgColor,transition:"opacity "+p.transitionDuration+" "+p.transitionTimingFunction}),this},open:function(o,r){if(!f&&!c){t="string"==typeof o?document.querySelector(o):o,p.onBeforeOpen&&p.onBeforeOpen(t),f=!0,c=!0,n=t.parentNode;var h=t.getBoundingClientRect(),m=Math.min(p.maxWidth/h.width,p.maxHeight/h.height),u=h.left-(window.innerWidth-h.width)/2,b=h.top-(window.innerHeight-h.height)/2;i=function(t,n){for(var i,e=getComputedStyle(t),o=document.createElement("div"),r=w.length;r--;)i=w[r],o.style[i]=e[i];return v(o,{visibility:"hidden",width:n.width+"px",height:n.height+"px",display:"inline"===e.display?"inline-block":e.display}),p.deepCopy?o.innerHTML=t.innerHTML:o.textContent=t.textContent,o}(t,h),e=v(t,{position:"absolute",top:0,left:0,right:"",bottom:"",whiteSpace:"nowrap",marginTop:-h.height/2+"px",marginLeft:-h.width/2+"px",cursor:a+"zoom-out",transform:"translate("+u+"px, "+b+"px)",transition:""},!0);var x=t.style.width.match(s),C=t.style.height.match(s);if(x||C){var T=x?+x[1]/100:1,E=C?+C[1]/100:1;v(d,{width:~~(h.width/T)+"px",height:~~(h.height/E)+"px"})}n.appendChild(l),n.appendChild(d),n.insertBefore(i,t),d.appendChild(t),l.style.display="block";t.offsetHeight;return l.style.opacity=p.bgOpacity,v(t,{transition:g+" "+p.transitionDuration+" "+p.transitionTimingFunction,transform:"scale("+m+")"}),t.addEventListener(y,function n(){t.removeEventListener(y,n),c=!1,(r=r||p.onOpen)&&r(t)}),this}},close:function(o){if(f&&!c){c=!0,p.onBeforeClose&&p.onBeforeClose(t);var r=i.getBoundingClientRect(),a=r.left-(window.innerWidth-r.width)/2,s=r.top-(window.innerHeight-r.height)/2;return l.style.opacity=0,v(t,{transform:"translate("+a+"px, "+s+"px)"}),t.addEventListener(y,function r(){t.removeEventListener(y,r),v(t,e),n.insertBefore(t,i),n.removeChild(i),n.removeChild(l),n.removeChild(d),l.style.display="none",i=null,f=!1,c=!1,(o="function"==typeof o?o:p.onClose)&&o(t)}),this}},listen:function t(n){if("string"!=typeof n)return v(n,{cursor:a+"zoom-in"}),n.addEventListener("click",function(t){t.stopPropagation(),f?b.close():b.open(n)}),this;for(var i=document.querySelectorAll(n),e=i.length;e--;)t(i[e])}};l.addEventListener("click",b.close),d.addEventListener("click",b.close),"object"==typeof exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):this.Zoomerang=b}();